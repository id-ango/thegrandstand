@model IEnumerable<GlobalSoft.Models.AptUnit>

@{
    ViewBag.Title = "DashBoard Unit";
}
<style>
    td.details-control {
        background: url('../../Content/DataTables/images/details_open.png') no-repeat center center;
        cursor: pointer;
    }

tr.shown td.details-control {
    background: url('../../Content/DataTables/images/details_close.png') no-repeat center center; }
</style>

<h2></h2>

<p></p>
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-primary list-panel" id="list-panel">
            <div class="panel-heading list-panel-heading">
                <h1 class="panel-title list-panel-title">Unit</h1>
            </div>
            <div class="panel-body">
                <table id="example" class="table table-striped table-bordered display nowrap row-border hover order-column" style="width:100%">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Unit</th>
                            <th>Lantai</th>
                            <th>Kategori</th>
                            <th>Status</th>
                            <th>Inhouse</th>
                            <th>KPR</th>

                        </tr>
                    </thead>



                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts
{

    <script type="text/javascript">


        /* Formatting function for row details - modify as you need */
        function format(rowdata) {

            return            '<div class="row">'+
             '   <div class="col-md-12">'+
            '      <div class="panel panel-primary list-panel" id="list-panel">' +
                '         <div class="panel-heading list-panel-heading">' +
                '            <h1 class="panel-title list-panel-title">Rincian Angsuran</h1>' +
                '       </div>' +
                
                '<table id="example" class="table table-striped table-bordered display nowrap row-border hover order-column" style="width:100%">' +
                '<thead>'+
                '<tr>' +
                '<th>Full name:</th>' +
                '<th>Extension number:</th>' +
                '<th>Extra info:</th>' +
               
                '</tr>' +
                '</thead>'+
                '<tr>' +
                '<td>' + rowdata.UnitNo + '</td>' +
                '<td>' + rowdata.Lantai + '</td>' +
                '<td>And any further details here (images etc)...</td>' +
                '</tr>' +
                
                '</table>' +
               
                '  </div >' +
                '  </div >' +
                '</div >';
        }

        $(document).ready(function () {
            var table = $('#example').DataTable({
                "ajax": "/dashboard/GetUnit",
                "type": "POST",
                "datatype": "json",
                "columns": [
                    {
                        "className": 'details-control',
                        "orderable": false,
                        "data": null,
                        "defaultContent": ''
                    },
                    { "data": "UnitNo" },
                    { "data": "Lantai" },
                    { "data": "Categorie" },
                    { "data": "Status" },
                    { "data": "PriceKPR" },
                    { "data": "Inhouse" }
                ],
                "order": [[1, 'asc']]
            });

            // Add event listener for opening and closing details
            $('#example tbody').on('click', 'td.details-control', function () {
                var tr = $(this).closest('tr');
                var row = table.row(tr);

                if (row.child.isShown()) {
                    // This row is already open - close it
                    row.child.hide();
                    tr.removeClass('shown');
                }
                else {
                    // Open this row
                    row.child(format(row.data())).show();
                    tr.addClass('shown');
                }
            });
        });

       
    </script>
}
