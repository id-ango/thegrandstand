
@model IEnumerable<GlobalSoft.Models.AptUnit>

@{
    ViewBag.Title = "DashBoard Unit";
}

<h2></h2>

<p></p>
<table id="example" class="display" style="width:100%">
    <thead>
        <tr>
            <th></th>
            <th>Unit</th>
            <th>Lantai</th>
            <th>Kategori</th>
            <th>Status</th>
            <th>Inhouse</th>
            <th>KPR</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <th></th>
            <th>Unit</th>
            <th>Lantai</th>
            <th>Kategori</th>
            <th>Status</th>
            <th>Inhouse</th>
            <th>KPR</th>
        </tr>
    </tfoot>
</table>


<div class="row">
    <div class="col-md-12">
        <div class="panel panel-primary list-panel" id="list-panel">
            <div class="panel-heading list-panel-heading">
                <h1 class="panel-title list-panel-title">Unit</h1>
            </div>
            <div class="panel-body">
                <table id="assets-data-table" class="table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr>
                            <th>Unit</th>
                            <th>Lantai</th>
                            <th>Kategori</th>
                            <th>Status</th>
                            <th>Inhouse</th>
                            <th>KPR</th>

                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var asset in Model)
                        {
                            <tr>
                                <td>@asset.UnitNo</td>
                                <td>@asset.Lantai</td>
                                <td>@asset.AptCategorie.Categorie</td>
                                <td>@asset.AptStatus.Status</td>
                                <td>@asset.Inhouse</td>
                                <td>@asset.PriceKPR</td>

                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts
{

    function format ( d ) {
    // `d` is the original data object for the row
    return '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">
        '+
        '
        <tr>
            '+
            '
            <td>Full name:</td>'+
            '
            <td>'+d.name+'</td>'+
            '
        </tr>'+
        '
        <tr>
            '+
            '
            <td>Extension number:</td>'+
            '
            <td>'+d.extn+'</td>'+
            '
        </tr>'+
        '
        <tr>
            '+
            '
            <td>Extra info:</td>'+
            '
            <td>And any further details here (images etc)...</td>'+
            '
        </tr>'+
        '
    </table>';
    }

    $(document).ready(function() {
    var table = $('#example').DataTable( {
    "ajax": "../ajax/data/objects.txt",
    "columns": [
    {
    "className":      'details-control',
    "orderable":      false,
    "data":           null,
    "defaultContent": ''
    },
    { "data": "UnitNo" },
    { "data": "Lantai" },
    { "data": "AptStatus.Status" },
    { "data": "AptCategorie.Categorie" }
    ],
    "order": [[1, 'asc']]
    } );

    // Add event listener for opening and closing details
    $('#example tbody').on('click', 'td.details-control', function () {
    var tr = $(this).closest('tr');
    var row = table.row( tr );

    if ( row.child.isShown() ) {
    // This row is already open - close it
    row.child.hide();
    tr.removeClass('shown');
    }
    else {
    // Open this row
    row.child( format(row.data()) ).show();
    tr.addClass('shown');
    }
    } );
    } );
}
