@model IEnumerable<GlobalSoft.Models.AptSPesanan>


@{
    ViewBag.Title = "Angsuran Surat Pesanan";
    WebGrid grid = new WebGrid(Model, rowsPerPage: 10);
}
<h2>Angsuran Surat Pesanan</h2>
<hr />
<div class="row">
    @grid.GetHtml(
            tableStyle: "table table-responsive table-striped table-bordered",
            columns: grid.Columns(
                grid.Column(header: "Surat Pesanan", format: @<text><div>@item.SPesanan</div></text>),
                grid.Column(header: "Due Date", format:@<text><div class="editDate" data-id="@item.SPesananID" data-propertyname="DueDate">@string.Format("{0:dd-MM-yyyy}", item.DueDate)</div></text>),
                grid.Column(header: "Keterangan", format:@<text><div class="edit" data-id="@item.SPesananID" data-propertyname="Keterangan">@item.Keterangan</div></text>),
                grid.Column(header: "Angsuran", format:@<text><div class="edit" data-id="@item.SPesananID" data-propertyname="Jumlah">@item.Jumlah</div></text>)
                                    )
                  )
</div>
<div>
    @Html.ActionLink("Back to List", "Index")
</div>
<style>
    .table td {
        width: 25%;
    }

    .w100 {
        width: 100px;
    }

    .margin10 {
        margin-left: 10px;
    }
</style>

<link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" rel="stylesheet" />
@section scripts{

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <script src="https://www.appelsiini.net/download/jquery.jeditable.js"></script>
    <script src="~/Scripts/jquery.jeditable.datepicker.js"></script>
    <script>
        $(document).ready(function () {
            var oldValue = '';
            $('.edit').editable('/SuratPesanan/Saveuser', {
                cssclass: 'jeditForm',
                tooltip: 'click to edit me...',
                width: 'none',
                height: 'none',
                onsubmit: function (settings, original) {
                    oldValue = original.revert;
                },
                submitdata: function () {
                    return {
                        id: $(this).data('id'),
                        PropertyName: $(this).data('propertyname')
                    };
                },
                callback: function (value, settings) {
                    var jsonData = $.parseJSON(value);
                    if (jsonData.status) {
                        $(this).text(jsonData.value);
                    }
                    else {
                        $(this).text(oldValue);
                    }
                }
            });

            $('.editSelect').editable('../home/Saveuser', {
                cssclass: 'jeditForm',
                tooltip: 'click to edit me...',
                width: 'none',
                height: 'none',
                type: 'select',
                submit: 'Ok',
                loadurl: '/home/GetUserRoles',
                loaddata: function () {
                    return { id: $(this).data('id') }
                },
                onsubmit: function (settings, original) {
                    oldValue = original.revert;
                },
                submitdata: function () {
                    return {
                        id: $(this).data('id'),
                        PropertyName: $(this).data('propertyname')
                    };
                },
                callback: function (value, settings) {
                    var jsonData = $.parseJSON(value);
                    if (jsonData.status) {
                        $(this).text(jsonData.value);
                    }
                    else {
                        $(this).text(oldValue);
                    }
                }
            });

            $('.editSelect').click(function () {
                $('select', this).addClass('form-control pull-left w100');
                $('button', this).addClass('btn btn-sm btn-success margin10');
            });

            $('.editDate').editable('/SuratPesanan/saveuser', {
                cssclass: 'jeditForm',
                tooltip: 'click to edit me...',
                type: 'datepicker',
                datepicker: {
                    dateFormat: 'dd-mm-yy',
                    changeMonth: true,
                    changeYear: true,
                    yearRange: '1900:' + (new Date().getFullYear() + 60)
                },
                onsubmit: function (settings, original) {
                    oldValue = original.revert;
                },
                submitdata: function () {
                    return {
                        id: $(this).data('id'),
                        PropertyName: $(this).data('propertyname')
                    };
                },
                callback: function (value, settings) {
                    var jsonData = $.parseJSON(value);
                    if (jsonData.status) {
                        $(this).text(jsonData.value);
                    }
                    else {
                        $(this).text(oldValue);
                    }
                }
            });
        });
    </script>
}
